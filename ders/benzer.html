<!DOCTYPE html>
<html lang="en-US">
<meta charset="UTF-8">
<meta name="viewport"    content="width=device-width">
<meta name="author"      content="M A Eyler, Istanbul, 2021" />
<meta name="description" content="Words from Quran" />
<link rel="stylesheet" href="ders.css" media="all">
<link rel="icon" href="/Kuran/image/icon.png">
<title>Benzerlik Öbekleri </title>
<style>
    pre {
        text-wrap: wrap;
    }
</style>
<h3>Benzerlik Öbekleri &emsp; <button class=goBack>◀</button></h3>

<p>Sure:Ayet <input type=search id=inp size=10 />&ensp;
<button id=bul>Bul</button>&ensp;
<button id=sil>Sil</button>&ensp;
<button id=und>&lt;</button>&ensp;
<pre id=out></pre>
<p>Burada seçilen 37:76 ayeti, kendisine benzeyen diğer iki ayetle birlikte üçlü bir öbek içinde bulunur. Benzerlik öbeklerinin çoğu ayet çiftleri olmakla birlikte, yüzlerce ayet içeren bir öbek de var. 
<p>Küçük benzerlik öbekleri: <br>
    İkili --  <a href="/Kuran/reader.html#v=21:7" target="iqra">21:7</a><br>
    Üçlü --   <a href="/Kuran/reader.html#v=78:6" target="iqra">78:6</a><br>
    Beşli --  <a href="/Kuran/reader.html#v=17:2" target="iqra">17:2</a><br>
    Yedili -- <a href="/Kuran/reader.html#v=43:1" target="iqra">43:1</a><br>
    Onlu --   <a href="/Kuran/reader.html#v=36:4" target="iqra">36:4</a><br>
<script src="/Kuran/code/utilities.js"></script>
<script>
"use strict";
var data = []
function getBlock(cv) {
    function addVerse(cv) {
        let i = cvToIndex(cv); m[cv] = i
        let s = parent.iqra.Q.simi._data[i]
        if (s) for (let x of s.split(' ')) {
            if (!m[x]) addVerse(x)
        }
    }
    let m = {}; addVerse(cv)
    let a = []; for (let x in m) a.push(m[x])
    return (a.length<2? null : a) 
}
function report() {
    function toCVstr(i) {
        let c = toChapter(i)
        let v = c+':'+(i-last[c-1])
        return `<a href="/Kuran/reader.html#v=${v}"
                 target="iqra">${v}</a>`
    }
    function toText(a) {
        if (!a) return cv+" benzeri yok"
        a = a.sort((x,y) => x-y).map(toCVstr)
        return cv+' -- '+a.length+' ayet\n'+a.join(' ')
    }
    let cv = inp.value
    if (!/\d+:\d+/.test(cv)) { //Normalize
        let [c, v] = cv.split(/\D/)
        cv = c+':'+v
    }
    if (data.length > 9) data.shift()
    data.push(toText(getBlock(cv)))
    showData()
}
function showData() {
    out.innerHTML = data.join('\n')
}
sil.onclick = () => {
    data.length = 0
    showData()
}
und.onclick = () => {
    if (data.length > 0) data.pop()
    showData()
}
inp.onchange = bul.onclick = report
inp.value = '37:76'; report()
</script>

<script src="init.js"></script>
